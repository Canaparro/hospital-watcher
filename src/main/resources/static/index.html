<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script>
        function getReport() {
            let state = document.getElementById("state").value;
            let city = document.getElementById("city").value;
            let request = new XMLHttpRequest();
            request.open("GET", "api/v1/bedreport/search?state="+state+"&city="+city);
            request.onreadystatechange = function() {
                if(this.readyState === 4) {
                    let result = '';
                    let jsonResponse = JSON.parse(this.response);
                    for(let i = 0; i<jsonResponse.length; i++) {
                        let keys = Object.keys(jsonResponse[i]);
                        keys.forEach((key) => {result = result.concat(key, " : ", jsonResponse[i][key], "\n")});
                        result = result.concat("\n");
                    }
                    document.getElementById("report").value = result;
                }
            };
            request.send();

        }
    </script>

    <title>Ocupação de leitos</title>
</head>
<body>
    <div>
        <label for="state">Estado</label>
        <input type="text" id="state" value="SANTA CATARINA"/>
    </div>
    <div>
        <label for="city" />Cidade</label>
        <input type="text" id="city" value="Jaraguá do Sul"/>
    </div>
    <div>
        <input type="button" id="getReport" onclick="getReport()" value="Ver relatório">
    </div>
    <div>
        <textarea id="report"></textarea>
    </div>
</body>
</html>